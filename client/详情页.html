<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>详情</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/data.css">
    <link rel="stylesheet" href="css/xlx-icon.css">
</head>
<body>
    <div class="chart-box">
		<div class="data-chart">
            <div class="file-info">
                <div class="file-name">
                    <i class="xlx-icon-type xlx-icon-type-xxx "></i>
                    <div class="text-name">雷神3：诸神的黄昏电影天堂中英字幕高清1080P[www.dytt.com]雷神3：诸神的黄昏电影天堂中英字幕高清1080P[www.dytt.com]</div>
                    <a href="#" class="link">[搜字幕]</a>
                </div>
                <div class="file-opt">
                    <a href="#" title="还原" class="ico-o-redo"></a>
                    <a href="#" title="删除" class="ico-o-delete"></a>
                    <a href="#" title="下载" class="ico-o-down"></a>
                     <!-- <a href="#" class="ico-o-open" title="打开文件夹"></a> -->
                    <!--<a href="#" class="ico-o-more" title="更多"></a> 
                    <a href="#" title="播放" class="ico-o-play"></a>
                    <a href="#" title="边下边播" class="ico-o-playnow"></a>
                    <a href="#" title="暂停" class="ico-o-pause"></a>-->
                </div>
            </div>
            
            <div class="canvas-box"><!-- 下载完成叠加finish -->
                <canvas id="dataChart" class="canvas-data"></canvas>
                <div class="xlx-data-ani" style="top: 100px;left: 100px;"><span class="xlx-data-type is-speed1"></span> <span class="xlx-data-bomb"></span></div>
                <div class="data-tips"></div>
            </div>

        </div>
        <div class="data-info">
            <div class="data-info-main">
                <p>下载进度<span>68%</span></p> <i class="line"></i> <p>平均速度 <span class="data">36.21M/s</span></p><i class="line"></i> <p>资源数<span>54/98</span></p>
            </div>
            <div class="data-info-des">
                <p><i class="label-color color-all"></i>全部速度</p>
                <i class="line"></i>
                <p><i class="label-color color-vip"></i>会员加速</p>
            </div>
        </div>
        <!-- 提示 -->
        <div class="data-note" style="display: none"><p><span class="ico-d-note"></span>应版权方要求，文件无法下载</p></div>
        <!-- 提示结束 -->
        <!-- 按钮 -->
        <div class="btn-data-wp" style="display:none">
            <a href="#" class="btn-opt"><span class="ico-d-open"></span>打开</a>
            <a href="#" class="btn-opt"><span class="ico-d-play"></span>播放</a>
            <a href="#" class="btn-opt"><span class="ico-d-redo"></span>还原</a>
            <a href="#" class="btn-opt"><span class="ico-d-delete"></span>删除任务</a>
            <a href="#" class="btn-opt"><span class="ico-d-down"></span>继续下载</a>
            <p class="txt-tips">本地文件已删除</p>
        </div>
        <!-- 按钮 结束-->
        <!-- <div style="position: absolute;right:20px;top: 20px;z-index: 9;"><button id="btnSpeed1">speed1</button><button id="btnSpeed2">speed2</button><button id="btnSpeed3">speed3</button> </div> -->
    </div>

    <script src="http://libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
    var data1 = [
        {x:0,y:80},
        {x:25,y:20},
        {x:50,y:30},
        {x:80,y:20},
        {x:153,y:35},
        {x:196,y:2},
        {x:230,y:15},
        {x:272,y:12},
        {x:298,y:15},
        {x:318,y:25},
        {x:325,y:30},
        {x:330,y:10},
        {x:338,y:12},
        {x:356,y:21},
        {x:385,y:16},
        {x:405,y:8},
        {x:450,y:30},
        {x:480,y:25},
        {x:480,y:25},
        {x:495,y:16},
        {x:512,y:8},
        {x:522,y:30},
        {x:560,y:25}
    ] 
	var canvas = document.getElementById("dataChart"),
        winWidth = document.body.offsetWidth,
        winHeight = document.body.offsetHeight; 
    canvas.setAttribute('width',winWidth);  
    canvas.setAttribute('height',winHeight - 96);     
    var h = canvas.height;

    lineDraw("#6fb6ff",data1,"rgba(15,151,255,.3)","rgba(15,151,255,0)");
    // lineDraw("#febd1d",data2,"rgba(255,162,15,.3)","rgba(255,223,4,0)");
    // lineDraw("#86abff",data3,"rgba(169,143,255,.3)","rgba(169,143,255,0)");
    // lineDraw("#ffae9f",data4,"rgba(255,158,208,.3)","rgba(236,73,255,0)");
    // lineDraw("#9f85ff",data5,"rgba(166,134,255,.4)","rgba(166,134,255,0)");

    function lineDraw(lineColor,lineData,fillColor1,fillColor2,lineSize){
	    if(canvas.getContext){ 
			var ctx = canvas.getContext("2d");
			ctx.lineWidth = 1;
            //绘制非会员曲线
			ctx.beginPath();
			for(i = 0;i< lineData.length; i++){
				if(i == 0){
					ctx.moveTo(lineData[i].x,lineData[i].y);
				}else{
					var ctrlPoint = getdata(lineData,i-1);
					ctx.bezierCurveTo(ctrlPoint.pA.x, ctrlPoint.pA.y, ctrlPoint.pB.x,ctrlPoint.pB.y, lineData[i].x, lineData[i].y);
				}
			}
			ctx.strokeStyle = lineColor; 
			ctx.stroke();

            //绘制非会员渐变层
			ctx.beginPath();
			ctx.moveTo(lineData[0].x,lineData[0].y);    
			for(i = 0; i<lineData.length; i++){
				if(i == 0){
					ctx.moveTo(lineData[i].x,lineData[i].y);
				}else{
					var ctrlPoint = getdata(lineData,i-1);
					ctx.bezierCurveTo(ctrlPoint.pA.x, ctrlPoint.pA.y, ctrlPoint.pB.x,ctrlPoint.pB.y, lineData[i].x, lineData[i].y);
				}
			}
			var n = lineData.length - 1;
			ctx.lineTo(lineData[n].x,h);
			ctx.lineTo(lineData[0].x,h);
			ctx.lineTo(lineData[0].x,lineData[0].y);
			var gradient = ctx.createLinearGradient(0,0,0,h);
				gradient.addColorStop(0,fillColor1);
				gradient.addColorStop(1,fillColor2);
			ctx.fillStyle = gradient;
			ctx.closePath();
			ctx.fill();		
		}
       
    }   
    /*
    *根据已知点获取第i个控制点的坐标
    *param ps	已知曲线将经过的坐标点
    *param i	第i个坐标点
    *param a,b	可以自定义的正数
    */
    function getdata(ps, i, a, b){
        if(!a||!b){
            a = 0.2;
            b = 0.2;
        }
        //处理两种极端情形
        if(i<1){
            var pAx = ps[0].x + (ps[1].x-ps[0].x)*a;
            var pAy = ps[0].y + (ps[1].y-ps[0].y)*a;
        }else{
            var pAx = ps[i].x + (ps[i+1].x-ps[i-1].x)*a;
            var pAy = ps[i].y + (ps[i+1].y-ps[i-1].y)*a;
        }
        if(i>ps.length-3){
            var last=ps.length-1
            var pBx = ps[last].x - (ps[last].x-ps[last-1].x)*b;
            var pBy = ps[last].y - (ps[last].y-ps[last-1].y)*b;
        }else{
            var pBx = ps[i+1].x - (ps[i+2].x-ps[i].x)*b;
            var pBy = ps[i+1].y - (ps[i+2].y-ps[i].y)*b;
        }
        return {
            pA:{x:pAx,y:pAy},
            pB:{x:pBx,y:pBy}
        }
    }
    function show(){
        $(".xlx-data-ani span").css("display","block");
        $(".xlx-data-type").addClass("is-scale");
        t = setTimeout(function(){
            $(".xlx-data-bomb").css("display","none");
            $(".xlx-data-type").removeClass("is-scale")
        },1000)
    }
    document.querySelector('.xlx-data-ani').style.left = data1[data1.length-1].x -7 + 'px'
    document.querySelector('.xlx-data-ani').style.top = data1[data1.length-1].y -7 + 'px';

    // document.getElementById("btnSpeed1").addEventListener("click",function(){
    //     document.querySelector(".xlx-data-type").classList.remove("is-speed2","is-speed3");
    //     document.querySelector(".xlx-data-type").classList.add("is-speed1");
        
    //     show();
    // })
    // document.getElementById("btnSpeed2").addEventListener("click",function(){
    //     document.querySelector(".xlx-data-type").classList.remove("is-speed1","is-speed3");
    //     document.querySelector(".xlx-data-type").classList.add("is-speed2");
    //     show();
    // })
    // document.getElementById("btnSpeed3").addEventListener("click",function(){
    //     document.querySelector(".xlx-data-type").classList.remove("is-speed1","is-speed2");
    //     document.querySelector(".xlx-data-type").classList.add("is-speed3");
    //     show();
    // })
    </script>

</body>
</html>